# üìö My Library API

## –û –ø—Ä–æ–µ–∫—Ç–µ
FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∫–Ω–∏–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. FastAPI - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
2. SQLite - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
3. Pydantic v2 - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã
4. SQLAlchemy 2.0 - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
5. Docker - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
6. –ü–æ–ª–Ω—ã–π CRUD - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è, —á—Ç–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è
7. –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è - –≥–∏–±–∫–∏–π –ø–æ–∏—Å–∫ –∫–Ω–∏–≥ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
8. –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ API-—Ç–µ—Å—Ç—ã —Å pytest –∏ Allure
9. CI/CD —á–µ—Ä–µ–∑ GitHub Actions —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –æ—Ç—á—ë—Ç–æ–≤ –Ω–∞ GitHub Pages

---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python 3.13
- FastAPI
- SQLAlchemy 2.0
- Pydantic v2
- SQLite + aiosqlite
- Docker + Docker Compose
- Uvicorn
- Pytest + Allure
- GitHub Actions (CI/CD)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
MyLibrary_test_api/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
‚îú‚îÄ‚îÄ library.db           # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îú‚îÄ‚îÄ models/              # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ books.py         # –ú–æ–¥–µ–ª—å –∫–Ω–∏–≥–∏
‚îú‚îÄ‚îÄ schemas/             # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ books.py         # –°—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ routers/             # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ books.py         # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∫–Ω–∏–≥
‚îî‚îÄ‚îÄ repository/          # –ü–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ books.py         # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îî‚îÄ‚îÄ tests/               # –ü–∞–ø–∫–∞ —Å —Ç–µ—Å—Ç–∞–º–∏   
‚îÇ   ‚îú‚îÄ‚îÄ  .env
‚îÇ   ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ  conftest.py 
‚îÇ   ‚îú‚îÄ‚îÄ  config/
‚îÇ  		 ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ  		 ‚îú‚îÄ‚îÄ  base_test.py		
‚îÇ  		 ‚îî‚îÄ‚îÄ headers.py 
‚îÇ   ‚îú‚îÄ‚îÄ  services/
‚îÇ			‚îî‚îÄ‚îÄ books/
‚îÇ  		 		‚îú‚îÄ‚îÄ  __init__.py
‚îÇ  		 		‚îú‚îÄ‚îÄ  api_books.py
‚îÇ  		 		‚îú‚îÄ‚îÄ  endpoints.py			
‚îÇ  		 		‚îî‚îÄ‚îÄ  payloads.py 
‚îÇ   ‚îú‚îÄ‚îÄ  tests/
‚îÇ  		 ‚îî‚îÄ‚îÄ test_books.py 
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ  	 	 ‚îú‚îÄ‚îÄ  __init__.py
‚îÇ  		 ‚îî‚îÄ‚îÄ  helper.py   
‚îú‚îÄ‚îÄ Dockerfile               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ pytest.ini
‚îî‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```
---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

### 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/mycrossstitch/MyLibrary
cd MyLibrary
```
### 2.–°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```
### 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
pip install -r requirements.txt
```
### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

Swagger UI: http://localhost:8000/docs

ReDoc: http://localhost:8000/redoc

–û—Å–Ω–æ–≤–Ω–æ–µ API: http://localhost:8000


## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
#### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫:
```
docker-compose up api
```
#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```
docker-compose down
```
## üìö API Endpoints

### üìñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏

| –ú–µ—Ç–æ–¥      | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ                            | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------------|----------|-------------------------------------|-----------|
| **GET**    | `/books` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏                  | - |
| **POST**   | `/books` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É                | –¢–µ–ª–æ: JSON –∫–Ω–∏–≥–∏ |
| **POST**   | `/books/bulk` | –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–Ω–∏–≥             | –¢–µ–ª–æ: –ú–∞—Å—Å–∏–≤ JSON –∫–Ω–∏–≥ |
| **GET**    | `/books/is_read` | –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—á—Ç–µ–Ω–∏—è | `is_read` (bool, default: False) |
| **GET**    | `/books/search` | –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º            | `author`, `title`, `year` |
| **GET**    | `/books/{id}` | –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID                | `id` (int) |
| **PUT**    | `/books/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É                      | `id` (int), –¢–µ–ª–æ: JSON –∫–Ω–∏–≥–∏ |
| **DELETE** | `/books/{id}` | –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É                       | `id` (int)|


## üîé –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ (`/books/search`):
- **author** (—Å—Ç—Ä–æ–∫–∞): –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞ (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
- **title** (—Å—Ç—Ä–æ–∫–∞): –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
- **year** (—á–∏—Å–ª–æ): –ü–æ–∏—Å–∫ –ø–æ —Ç–æ—á–Ω–æ–º—É –≥–æ–¥—É –∏–∑–¥–∞–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
- –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫ –¥–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è

# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ:
```
pytest -sv --alluredir=tests/allure-results
```
## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Allure –æ—Ç—á—ë—Ç–∞:
```
allure serve tests/allure-results
```
## –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HTML
```
allure generate tests/allure-results --clean -o tests/allure-report
```
## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ Docker:
#### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ api+tests:
```
docker-compose up -d --build

```

```
docker-compose run --rm tests
docker-compose run --rm tests sh -c "allure generate tests/allure-results --clean -o tests/allure-report"
```

# ‚ö° CI/CD

–ù–∞—Å—Ç—Ä–æ–µ–Ω GitHub Actions:
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ Docker
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Allure –æ—Ç—á—ë—Ç–∞
–î–µ–ø–ª–æ–π –æ—Ç—á—ë—Ç–∞ –Ω–∞ GitHub Pages
–ò—Å—Ç–æ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø—Ä–æ–≥–æ–Ω–∫–∞–º–∏ –¥–ª—è Allure